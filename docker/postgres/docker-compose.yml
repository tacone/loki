version: '3.4'

services:

  postgres:

    # ğŸ–¼ï¸
    image: postgres:13-alpine

    # ğŸŒ³
    environment:
      POSTGRES_PASSWORD: postgrespassword

    # ğŸ‘»
    restart: "always"

    # ğŸ›¡ï¸ make everything read-only except the volumes
    read_only: true

    # The $USER_ID env variable will not be applied to
    # this service.
    #
    # The run-time user is already managed by the postgres image
    # which will set it to "postgres" (uid: 70)
    # ğŸ”‘
    # user: -- * don't use this directive *

    # ğŸ“‚
    volumes:
      - ./data/postgres:/var/lib/postgresql/data
      - /tmp/devday/postgres:/tmp
      - /tmp/devday/postgres-var-run:/var/run
